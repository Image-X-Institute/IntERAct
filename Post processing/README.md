# Post-processing to align graphically outputs and inputs using RealSense camera: 

### IntERAct_data_analysis:
Reproducible script to analyse the data from the laboratory and clinical testing of the IntERAct combined 6DoF and 1DoF platform. The script uses the data in the folders Figure 5 - Table 2 and Figure 6 - Table 3. Three user inputs are required (user path of the Post processing folder, test_location, and trace - can be selected from lists in the code).

### PESM_updated:
Script to generate plots of the IntERAct combined 6DoF and 1DoF platform operation in the laboratory and the clinic. The script uses the data in the folders Figure 5 - Table 2 and Figure 6 - Table 3. Three user inputs are required (user path of the Post processing folder, larger figure number and sub figure number - see comments in the code).

### RMSEAlignMethod:
General function to align the input and output motion traces of the 6DoF and 1DoF platform components of IntERAct.
- 8 lists generated by the input and output data txt files (1D input timestamps, 1D input displacements, 1D (and 6D) acquisition timestamps by RealSense, 1D depth measurements recorded by RealSense, 6D input timestamps, 6D input displacements, 6D depth measurements recorded by RealSense).  

- Initialization of a list of time and amplitude shifts to test and start a loop (for each testing shifts value from the list).


- For each iteration: 

  - Subtract the testing shift to the output timestamps and get rid of the output values before beggining and end of the motion trace. 
  - Calculation of the RMSE between interpolated input data and shifted output data and save that value in a list
  - For each time shift value, calculation of the RMSE between interpolated input data and time shifted AND amplitude shifted output data
  - Find the minimal RMSE from the RMSE list 
  - The index of the min RMSE gives the index of the optimal shift in the list of shifts initialized at the beginning.  

The difference between the two optimal shifts is the latency of the combined system. 

Once the optimal shift is found, the difference between interpolated input and optimal shifted output can be calculated -> mean, std, 1st and 99th percentile for each test, then for each trace and finally for all the traces.

### read1Dfile, read6Dfile, readDistFile, readTimeFile
Helper functions to read the files in the Figure 5 - Table 2 and Figure 6 - Table 3 folders. Used by the above data analysis scripts.
